# 계층형 카테고리 구조 개선 제안서

## 현재 상황 분석

### 예상되는 카테고리 구조
```
프론트엔드
├── 프레임워크
│   ├── React
│   │   ├── Hook
│   │   │   ├── useState
│   │   │   └── useEffect
│   │   └── 컴포넌트
│   ├── Next.js
│   └── Vue
├── 라이브러리
└── 아키텍처

개념
├── 클로저
└── ...
```

### 문제점
1. **UI 복잡성**: 깊은 계층 구조를 평면 리스트로 표시하기 어려움
2. **관계 표현**: 카테고리 간 관계(예: useState ↔ 클로저)를 표현하기 어려움
3. **검색/필터링**: 하위 카테고리 포함 검색이 어려움
4. **관리**: 카테고리 구조 편집이 어려움

## 개선 방안

### 1. 계층형 드롭다운 UI 개선

**현재**: 평면 리스트로 모든 카테고리 표시
**개선**: 
- 트리 구조로 표시 (접기/펼치기)
- Breadcrumb 표시 (프론트엔드 > 프레임워크 > React > Hook)
- 검색 기능 추가
- 하위 카테고리 포함 필터 옵션

### 2. 카테고리 관리 페이지 (관리자용)

**기능**:
- 트리 구조 시각화 및 편집
- 드래그 앤 드롭으로 카테고리 이동
- 카테고리 생성/수정/삭제
- 카테고리 간 관계 설정 (선택적)
- 카테고리 통계 (글 개수, 하위 카테고리 수)

### 3. 카테고리 필터링 개선

**옵션**:
- 선택한 카테고리만 필터링
- 선택한 카테고리 + 모든 하위 카테고리 포함 필터링
- 검색어로 카테고리 찾기

### 4. 태그 시스템 추가 (선택적)

**이유**:
- 카테고리는 계층 구조로 정리
- 태그는 다중 분류 및 관계 표현에 사용
- 예: "useState" 글은 "React > Hook > useState" 카테고리 + "클로저", "상태관리" 태그

**구현**:
- `Tag` 모델 추가
- `ArticleTag` 중간 테이블
- 태그 자동 추천 기능

### 5. 카테고리 관계 시각화

**기능**:
- 선택한 카테고리의 부모/자식 경로 표시
- 관련 카테고리 추천
- 카테고리 네비게이션 (이전/다음 형제 카테고리)

## 구현 우선순위

### Phase 1: 필수 기능
1. ✅ 계층형 드롭다운 UI 개선
2. ✅ 카테고리 검색 기능
3. ✅ 하위 카테고리 포함 필터 옵션

### Phase 2: 관리 기능
4. 카테고리 관리 페이지
5. 드래그 앤 드롭 편집
6. 카테고리 통계

### Phase 3: 고급 기능 (선택적)
7. 태그 시스템
8. 카테고리 관계 시각화
9. 카테고리 네비게이션

## 기술적 고려사항

### 성능
- 깊은 트리 구조에서의 쿼리 최적화
- 카테고리 캐싱 전략
- 무한 스크롤 vs 페이지네이션

### UX
- 모바일 반응형 디자인
- 키보드 네비게이션
- 접근성 (ARIA 라벨, 스크린 리더)

### 확장성
- 카테고리 깊이 제한 (권장: 4-5단계)
- 카테고리 개수 제한
- 카테고리 이름 중복 처리

## 데이터베이스 스키마 개선 (선택적)

### 현재 스키마
```prisma
model Category {
  id          String
  name        String
  slug        String
  parentId    String?
  // ...
}
```

### 개선안: 태그 시스템 추가
```prisma
model Tag {
  id        String   @id @default(cuid())
  name      String   @unique
  slug      String   @unique
  createdAt DateTime @default(now())
  
  articles  ArticleTag[]
}

model ArticleTag {
  id        String   @id @default(cuid())
  articleId String
  tagId     String
  
  article   Article @relation(fields: [articleId], references: [id], onDelete: Cascade)
  tag       Tag     @relation(fields: [tagId], references: [id], onDelete: Cascade)
  
  @@unique([articleId, tagId])
  @@index([articleId])
  @@index([tagId])
}
```

## UI/UX 디자인 제안

### 계층형 드롭다운
```
┌─────────────────────────────────┐
│ 카테고리: React > Hook > useState│
└─────────────────────────────────┘
         ▼
┌─────────────────────────────────┐
│ 🔍 검색...                       │
├─────────────────────────────────┤
│ 📁 프론트엔드                    │
│   ├─ 📁 프레임워크               │
│   │   ├─ 📁 React [12]          │
│   │   │   ├─ 📁 Hook [8]        │
│   │   │   │   ├─ useState [3]   │
│   │   │   │   └─ useEffect [5]  │
│   │   │   └─ 컴포넌트 [4]        │
│   │   ├─ Next.js [5]            │
│   │   └─ Vue [3]                │
│   └─ 📁 라이브러리               │
└─────────────────────────────────┘
```

### 필터 옵션
```
[ ] 하위 카테고리 포함
[ ] 빈 카테고리 숨기기
```

## 다음 단계

1. **Phase 1 구현**: 계층형 드롭다운 UI 개선
2. **사용자 피드백 수집**: 실제 사용 패턴 확인
3. **Phase 2 결정**: 관리 페이지 필요성 판단
4. **Phase 3 검토**: 태그 시스템 도입 여부 결정

